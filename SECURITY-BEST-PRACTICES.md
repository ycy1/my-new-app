# 安全最佳实践指南

本指南总结了保护Electron应用项目中敏感信息的最佳实践，特别是针对GitHub个人访问令牌等凭据的处理。

## 1. 为什么不应该在代码中硬编码凭据

在代码中硬编码凭据（如GitHub令牌、API密钥等）会导致严重的安全风险：

- 凭据可能会被意外提交到公共代码仓库
- GitHub的秘密扫描功能会检测到这些凭据并阻止推送
- 即使在私有仓库中，硬编码凭据也容易被泄露
- 凭据泄露可能导致未授权访问、数据泄露等安全事件

## 2. 我们的修复措施

1. **移除硬编码的GitHub令牌**：从`package.json`的publish脚本中移除了直接设置`GITHUB_TOKEN`的代码

2. **使用环境变量**：改为使用`.env`文件存储敏感信息，通过`dotenv`包在运行时加载

3. **确保敏感文件被忽略**：`.gitignore`文件已经正确配置为忽略`.env`文件，防止敏感信息被提交

## 3. 如何安全地管理凭据

### 本地开发

1. 使用`.env`文件存储敏感信息
2. 确保`.env`文件在`.gitignore`中被忽略
3. 使用`dotenv`包在应用中加载这些环境变量

### 持续集成/部署环境

1. 在CI/CD平台（如GitHub Actions）中使用"密钥"或"机密"功能存储敏感信息
2. 配置CI/CD流程从这些安全存储中加载环境变量

## 4. 当前的环境变量配置

目前，项目使用以下环境变量：

- `GITHUB_TOKEN`：GitHub个人访问令牌，用于发布版本
- `CERTIFICATE_PASSWORD`：应用签名证书的密码

这些变量都存储在`.env`文件中，并通过`dotenv`包加载。

## 5. 使用说明

### 发布应用

由于我们移除了publish脚本中硬编码的令牌，现在发布应用的步骤为：

```bash
# 确保.env文件中包含正确的GITHUB_TOKEN
# 然后运行publish命令
npm run publish
```

`dotenv`包会在Forge配置中自动加载`.env`文件中的环境变量，无需在命令行中手动设置。

## 6. 安全提示

- 定期轮换您的GitHub个人访问令牌
- 为令牌分配最小必要的权限
- 不要与他人共享您的令牌或.env文件
- 考虑使用GitHub Actions Secrets等更安全的方式存储CI/CD环境中的凭据
- 如果您怀疑令牌已被泄露，立即撤销并生成新的令牌

---

按照这些最佳实践，可以有效保护您的项目不被敏感信息泄露，并确保符合GitHub的安全要求。